BEGIN;

DROP TABLE IF EXISTS lopp, tvl, prog;

CREATE TABLE lopp
(
    id        int        NOT NULL,
    horseid   int        NOT NULL,
    datum     date       NOT NULL,
    bana      varchar(5) DEFAULT NULL,
    lopp      smallint   NOT NULL,
    spar      smallint   NOT NULL,
    distans   char(2)    DEFAULT NULL,
    tillagg   char(1)    DEFAULT NULL,
    placering char(1)    DEFAULT NULL,
    tid       varchar(5) DEFAULT NULL,
    odds      varchar(4) DEFAULT NULL,
    kusk      varchar(6) DEFAULT NULL,
    verklspar smallint   DEFAULT NULL,
    PRIMARY KEY (id)
);


CREATE TABLE tvl
(
    id         int        NOT NULL,
    datum      date       NOT NULL,
    bana       varchar(5) DEFAULT NULL,
    lopp       smallint   NOT NULL,
    startsatt  varchar(1)          DEFAULT NULL,
    distans    varchar(1)          DEFAULT NULL,
    division   varchar(1)          DEFAULT NULL,
    banforh    varchar(1)          DEFAULT NULL,
    v5         smallint            DEFAULT NULL,
    v75        smallint            DEFAULT NULL,
    v86        smallint            DEFAULT NULL,
    v65        smallint            DEFAULT NULL,
    forstapris int                 DEFAULT NULL,
    loppid     int                 DEFAULT NULL,
    starttid   varchar(5)          DEFAULT NULL,
    konhv      smallint            DEFAULT NULL,
    antilopp   smallint   NOT NULL DEFAULT '0',
    PRIMARY KEY (id));


CREATE TABLE prog (
                      id int NOT NULL,
                      tvlid int NOT NULL,
                      horseid int NOT NULL,
                      spar smallint NOT NULL,
                      kusk int DEFAULT NULL,
                      pvalue float4 DEFAULT NULL,
                      tid varchar(6) DEFAULT NULL,
                      verklspar smallint DEFAULT NULL,
                      plac char(1) DEFAULT NULL,
                      rank smallint DEFAULT NULL,
                      atgkod varchar(6) DEFAULT NULL,
                      odds1 int DEFAULT NULL,
                      v1 int  DEFAULT NULL,
                      v2 int  DEFAULT NULL,
                      v3 int  DEFAULT NULL,
                      v4 int  DEFAULT NULL,
                      v5 int  DEFAULT NULL,
                      v6 int  DEFAULT NULL,
                      v7 int  DEFAULT NULL,
                      v8 int  DEFAULT NULL,
                      v9 int  DEFAULT NULL,
                      v10 int  DEFAULT NULL,
                      v11 int  DEFAULT NULL,
                      v12 int  DEFAULT NULL,
                      v13 int  DEFAULT NULL,
                      v14 int  DEFAULT NULL,
                      v15 int  DEFAULT NULL,
                      v16 int  DEFAULT NULL,
                      v17 int  DEFAULT NULL,
                      v18 int  DEFAULT NULL,
                      v19 int  DEFAULT NULL,
                      v20 int  DEFAULT NULL,
                      v21 int  DEFAULT NULL,
                      v22 int  DEFAULT NULL,
                      v23 int  DEFAULT NULL,
                      v24 int  DEFAULT NULL,
                      v25 int  DEFAULT NULL,
                      v26 int  DEFAULT NULL,
                      v27 int  DEFAULT NULL,
                      v28 int  DEFAULT NULL,
                      v29 int  DEFAULT NULL,
                      v30 int  DEFAULT NULL,
                      v31 int  DEFAULT NULL,
                      v32 int  DEFAULT NULL,
                      v33 int  DEFAULT NULL,
                      v34 int  DEFAULT NULL,
                      v35 int  DEFAULT NULL,
                      v36 int  DEFAULT NULL,
                      v37 int  DEFAULT NULL,
                      v38 int  DEFAULT NULL,
                      v39 int  DEFAULT NULL,
                      v40 int  DEFAULT NULL,
                      v41 int  DEFAULT NULL,
                      v42 int  DEFAULT NULL,
                      v43 int  DEFAULT NULL,
                      v44 int  DEFAULT NULL,
                      v45 int  DEFAULT NULL,
                      v46 int  DEFAULT NULL,
                      v47 int  DEFAULT NULL,
                      v48 int  DEFAULT NULL,
                      v49 int  DEFAULT NULL,
                      v50 int  DEFAULT NULL,
                      v51 int  DEFAULT NULL,
                      v52 int  DEFAULT NULL,
                      v53 int  DEFAULT NULL,
                      v54 int  DEFAULT NULL,
                      v55 int  DEFAULT NULL,
                      v56 int  DEFAULT NULL,
                      stabilitet float4 DEFAULT NULL,
                      stabb float4 DEFAULT NULL,
                      bort varchar(1) DEFAULT NULL,
                      pvalue2 float4 DEFAULT NULL,
                      stid smallint DEFAULT NULL,
                      diff smallint DEFAULT NULL,
                      tidsrank float4 DEFAULT NULL,
                      tidsplac float4 DEFAULT NULL,
                      tidsrank2 float4 DEFAULT NULL,
                      v57 int  DEFAULT NULL,
                      v58 int  DEFAULT '0',
                      v59 int  DEFAULT NULL,
                      v60 int  DEFAULT NULL,
                      ranktid smallint  DEFAULT NULL,
                      v61 int  DEFAULT NULL,
                      v62 int  DEFAULT NULL,
                      bana varchar(5) DEFAULT NULL,
                      avdv75 smallint  DEFAULT NULL,
                      v63 int DEFAULT NULL,
                      v64 int DEFAULT NULL,
                      v65 int  DEFAULT NULL,
                      v66 int  DEFAULT NULL,
                      agarnr int  DEFAULT NULL,
                      tranarnr int  DEFAULT NULL,
                      v67 int  DEFAULT NULL,
                      uppehall smallint  DEFAULT NULL,
                      v68 int  DEFAULT NULL,
                      v69 int  DEFAULT NULL,
                      v70 int  DEFAULT NULL,
                      v71 int  DEFAULT NULL,
                      v72 int  DEFAULT NULL,
                      v73 int  DEFAULT NULL,
                      antstreck int  DEFAULT NULL,
                      v74 int  DEFAULT '0',
                      v75 int  DEFAULT '0',
                      v76 int  DEFAULT NULL,
                      v77 int  DEFAULT NULL,
                      v78 int  DEFAULT NULL,
                      v79 int  DEFAULT NULL,
                      v80 int  DEFAULT NULL,
                      v81 int  DEFAULT NULL,
                      v82 int  DEFAULT NULL,
                      v83 int  DEFAULT NULL,
                      v84 int  DEFAULT '0',
                      v85 int  DEFAULT '0',
                      v86 int  DEFAULT NULL,
                      v87 int  DEFAULT NULL,
                      v88 int  DEFAULT NULL,
                      v89 int  DEFAULT NULL,
                      v90 int  DEFAULT NULL,
                      v91 int  DEFAULT NULL,
                      v92 int  DEFAULT NULL,
                      v93 int  DEFAULT NULL,
                      v94 int  DEFAULT NULL,
                      v95 int  DEFAULT NULL,
                      v96 int  DEFAULT NULL,
                      v97 int  DEFAULT NULL,
                      v98 int  DEFAULT NULL,
                      v99 int  DEFAULT NULL,
                      PRIMARY KEY ("id")
);

CREATE INDEX tvldatum_ix ON tvl (datum,bana,lopp);
CREATE INDEX loppdatum_ix ON lopp (horseid,datum,bana,lopp);
CREATE UNIQUE INDEX progdatum_ix ON prog (tvlid,spar);
CREATE INDEX horse_ix ON prog (horseid,tvlid);
CREATE INDEX kusk_ix ON prog (tvlid,kusk);


END;